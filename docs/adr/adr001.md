# ADR 001 – Adoption de l'architecture hexagonale

## Statut

Acceptée

## Contexte

Nous avons besoin d'une architecture qui facilite le développement et les futurs changements de paradigme. Ces contraintes se prêtent bien à une modularisation des composants.

Les options considérées étaient:

- **MVC classique** : simple mais favorise un couplage fort entre interface, logique et persistance.
- **Architecture en couches (layered)** : claire mais parfois rigide, et risque de fuite des dépendances techniques vers le domaine.
- **Architecture hexagonale (ports et adaptateurs)** : meilleure séparation entre le coeur métier et les interfaces, plus adaptée à une évolution incrémentale.

## Décision

Nous utiliserons le style hexagonal (ports et adaptateurs) pour isoler le domaine métier des détails techniques.

- Le domaine métier est au centre (entités, règles, services applicatifs).
- Les interactions avec le monde extérieur passent par des **ports** (interfaces) et des **adaptateurs** (implémentations concrètes, ex. CLI, base de données).

## Conséquences

**Positives :**

- Isolation forte du code métier par rapport aux dépendances externes.
- Facilite les tests unitaires et les simulations en isolant le domaine.
- Prépare naturellement la migration vers des microservices ou une architecture événementielle.
- Rust permet d’exprimer proprement les ports via les **traits**, et les adaptateurs via leurs implémentations.

**Négatives :**

- Ajoute une complexité initiale (plus de couches et de discipline dans la conception).
- Les développeurs doivent être rigoureux dans la séparation **domaine <=> infrastructure**.
- La simplicité d’un MVC aurait permis une mise en route plus rapide pour un prototype minimal.

**Impact :**

- Organisation des modules Rust autour du domaine et des ports/adaptateurs.
